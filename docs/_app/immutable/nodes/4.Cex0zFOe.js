var jt=Object.defineProperty;var ot=e=>{throw TypeError(e)};var Nt=(e,t,s)=>t in e?jt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var L=(e,t,s)=>Nt(e,typeof t!="symbol"?t+"":t,s),$t=(e,t,s)=>t.has(e)||ot("Cannot "+s);var F=(e,t,s)=>($t(e,t,"read from private field"),s?s.call(e):t.get(e)),at=(e,t,s)=>t.has(e)?ot("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s);import{t as I,a as z}from"../chunks/DtXQzff3.js";import{aF as It,j as Ft,o as q,z as Ut,aG as lt,H as xt,B as Ht,x as qt,C as ct,a6 as ht,L as Z,N as ut,M as gt,q as Vt,v as Kt,ap as ft,ao as mt,aH as yt,a5 as Yt,F as Gt,k as Jt,G as Q,aw as Zt,p as Y,am as pt,f as P,c as N,h as k,s as K,n as U,r as $,t as st,d as G,an as dt,g as x,i as Ot,b as bt,aI as Qt,$ as Xt}from"../chunks/MDsmH9hs.js";import{h as Wt}from"../chunks/C1EV1go8.js";import{c as te,s as ee,b as ne}from"../chunks/BKHdo8hb.js";import{o as Rt}from"../chunks/7nxS_UPl.js";import{c as se}from"../chunks/DgYaPlNX.js";import{p as re,r as zt,s as ie}from"../chunks/BN44YgX0.js";import{i as _t,s as oe}from"../chunks/DEeQaJXw.js";import{e as ae}from"../chunks/Cw5M8hkg.js";import{b as le}from"../chunks/CO4uCCU2.js";import{v as vt}from"../chunks/DvBLjZDy.js";const X=0,V=1,W=2;function ce(e,t,s,n,r){q&&Ut();var i=e,o=It(),a=Yt,l=ht,c,g,u,f=(o?ut:gt)(void 0),m=(o?ut:gt)(void 0),h=!1;function y(d,p){h=!0,p&&(ft(b),mt(b),yt(a));try{d===V&&n&&(g?Gt(g):g=Jt(()=>n(i,f))),d!==X&&c&&Q(c,()=>c=null),d!==V&&g&&Q(g,()=>g=null),d!==W&&u&&Q(u,()=>u=null)}finally{p&&(yt(null),mt(null),ft(null),Zt())}}var b=Ft(()=>{if(l===(l=t()))return;let d=q&&lt(l)===(i.data===xt);if(d&&(i=Ht(),qt(i),ct(!1),d=!0),lt(l)){var p=l;h=!1,p.then(_=>{p===l&&(Z(f,_),y(V,!0))},_=>{if(p===l)throw Z(m,_),y(W,!0),m.v}),q||Vt(()=>{h||y(X,!0)})}else Z(f,l),y(V,!1);return d&&ct(!0),()=>l=ht});q&&(i=Kt)}const he=Object.freeze({diffTimeout:1,diffEditCost:4,matchThreshold:.5,matchDistance:1e3,patchDeleteThreshold:.5,patchMargin:4,matchMaxBits:32});function ue(e){if(e!=null&&e.__resolved)return e;const t={...he,...e};return Object.defineProperty(t,"__resolved",{value:!0,enumerable:!1}),t}const B=-1,A=1,C=0;function S(e,t){return[e,t]}function O(e,t,s,n=!0,r){const i=ue(s);typeof r>"u"&&(i.diffTimeout<=0?r=Number.MAX_VALUE:r=new Date().getTime()+i.diffTimeout*1e3);const o=r;if(e==null||t==null)throw new Error("Null input. (diff_main)");if(e===t)return e?[S(C,e)]:[];const a=n;let l=rt(e,t);const c=e.substring(0,l);e=e.substring(l),t=t.substring(l),l=J(e,t);const g=e.substring(e.length-l);e=e.substring(0,e.length-l),t=t.substring(0,t.length-l);const u=ge(e,t,i,a,o);return c&&u.unshift(S(C,c)),g&&u.push(S(C,g)),it(u),u}function ge(e,t,s,n,r){let i;if(!e)return[S(A,t)];if(!t)return[S(B,e)];const o=e.length>t.length?e:t,a=e.length>t.length?t:e,l=o.indexOf(a);if(l!==-1)return i=[S(A,o.substring(0,l)),S(C,a),S(A,o.substring(l+a.length))],e.length>t.length&&(i[0][0]=i[2][0]=B),i;if(a.length===1)return[S(B,e),S(A,t)];const c=de(e,t,s);if(c){const g=c[0],u=c[1],f=c[2],m=c[3],h=c[4],y=O(g,f,s,n,r),b=O(u,m,s,n,r);return y.concat([S(C,h)],b)}return n&&e.length>100&&t.length>100?fe(e,t,s,r):me(e,t,s,r)}function fe(e,t,s,n){const r=ye(e,t);e=r.chars1,t=r.chars2;const i=r.lineArray,o=O(e,t,s,!1,n);pe(o,i),be(o),o.push(S(C,""));let a=0,l=0,c=0,g="",u="";for(;a<o.length;){switch(o[a][0]){case A:c++,u+=o[a][1];break;case B:l++,g+=o[a][1];break;case C:if(l>=1&&c>=1){o.splice(a-l-c,l+c),a=a-l-c;const f=O(g,u,s,!1,n);for(let m=f.length-1;m>=0;m--)o.splice(a,0,f[m]);a=a+f.length}c=0,l=0,g="",u="";break}a++}return o.pop(),o}function me(e,t,s,n){const r=e.length,i=t.length,o=Math.ceil((r+i)/2),a=o,l=2*o,c=new Array(l),g=new Array(l);for(let d=0;d<l;d++)c[d]=-1,g[d]=-1;c[a+1]=0,g[a+1]=0;const u=r-i,f=u%2!==0;let m=0,h=0,y=0,b=0;for(let d=0;d<o&&!(new Date().getTime()>n);d++){for(let p=-d+m;p<=d-h;p+=2){const _=a+p;let v;p===-d||p!==d&&c[_-1]<c[_+1]?v=c[_+1]:v=c[_-1]+1;let w=v-p;for(;v<r&&w<i&&e.charAt(v)===t.charAt(w);)v++,w++;if(c[_]=v,v>r)h+=2;else if(w>i)m+=2;else if(f){const E=a+u-p;if(E>=0&&E<l&&g[E]!==-1){const T=r-g[E];if(v>=T)return wt(e,t,s,v,w,n)}}}for(let p=-d+y;p<=d-b;p+=2){const _=a+p;let v;p===-d||p!==d&&g[_-1]<g[_+1]?v=g[_+1]:v=g[_-1]+1;let w=v-p;for(;v<r&&w<i&&e.charAt(r-v-1)===t.charAt(i-w-1);)v++,w++;if(g[_]=v,v>r)b+=2;else if(w>i)y+=2;else if(!f){const E=a+u-p;if(E>=0&&E<l&&c[E]!==-1){const T=c[E],R=a+T-E;if(v=r-v,T>=v)return wt(e,t,s,T,R,n)}}}}return[S(B,e),S(A,t)]}function wt(e,t,s,n,r,i){const o=e.substring(0,n),a=t.substring(0,r),l=e.substring(n),c=t.substring(r),g=O(o,a,s,!1,i),u=O(l,c,s,!1,i);return g.concat(u)}function ye(e,t){const s=[],n={};let r=4e4;s[0]="";function i(l){let c="",g=0,u=-1,f=s.length;for(;u<l.length-1;){u=l.indexOf(`
`,g),u===-1&&(u=l.length-1);let m=l.substring(g,u+1);(n.hasOwnProperty?Object.prototype.hasOwnProperty.call(n,m):n[m]!==void 0)?c+=String.fromCharCode(n[m]):(f===r&&(m=l.substring(g),u=l.length),c+=String.fromCharCode(f),n[m]=f,s[f++]=m),g=u+1}return c}const o=i(e);r=65535;const a=i(t);return{chars1:o,chars2:a,lineArray:s}}function pe(e,t){for(let s=0;s<e.length;s++){const n=e[s][1],r=[];for(let i=0;i<n.length;i++)r[i]=t[n.charCodeAt(i)];e[s][1]=r.join("")}}function rt(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;let s=0,n=Math.min(e.length,t.length),r=n,i=0;for(;s<r;)e.substring(i,r)===t.substring(i,r)?(s=r,i=s):n=r,r=Math.floor((n-s)/2+s);return r}function J(e,t){if(!e||!t||e.charAt(e.length-1)!==t.charAt(t.length-1))return 0;let s=0,n=Math.min(e.length,t.length),r=n,i=0;for(;s<r;)e.substring(e.length-r,e.length-i)===t.substring(t.length-r,t.length-i)?(s=r,i=s):n=r,r=Math.floor((n-s)/2+s);return r}function St(e,t){const s=e.length,n=t.length;if(s===0||n===0)return 0;s>n?e=e.substring(s-n):s<n&&(t=t.substring(0,s));const r=Math.min(s,n);if(e===t)return r;let i=0,o=1;for(;;){const a=e.substring(r-o),l=t.indexOf(a);if(l===-1)return i;o+=l,(l===0||e.substring(r-o)===t.substring(0,o))&&(i=o,o++)}}function de(e,t,s){if(s.diffTimeout<=0)return null;const n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||r.length*2<n.length)return null;function i(h,y,b){const d=h.substring(b,b+Math.floor(h.length/4));let p=-1,_="",v,w,E,T;for(;(p=y.indexOf(d,p+1))!==-1;){const R=rt(h.substring(b),y.substring(p)),H=J(h.substring(0,b),y.substring(0,p));_.length<H+R&&(_=y.substring(p-H,p)+y.substring(p,p+R),v=h.substring(0,b-H),w=h.substring(b+R),E=y.substring(0,p-H),T=y.substring(p+R))}return _.length*2>=h.length?[v,w,E,T,_]:null}const o=i(n,r,Math.ceil(n.length/4)),a=i(n,r,Math.ceil(n.length/2));let l;if(!o&&!a)return null;a?o?l=o[4].length>a[4].length?o:a:l=a:l=o;let c,g,u,f;e.length>t.length?(c=l[0],g=l[1],u=l[2],f=l[3]):(u=l[0],f=l[1],c=l[2],g=l[3]);const m=l[4];return[c,g,u,f,m]}function be(e){let t=!1;const s=[];let n=0,r=null,i=0,o=0,a=0,l=0,c=0;for(;i<e.length;)e[i][0]===C?(s[n++]=i,o=l,a=c,l=0,c=0,r=e[i][1]):(e[i][0]===A?l+=e[i][1].length:c+=e[i][1].length,r&&r.length<=Math.max(o,a)&&r.length<=Math.max(l,c)&&(e.splice(s[n-1],0,S(B,r)),e[s[n-1]+1][0]=A,n--,n--,i=n>0?s[n-1]:-1,o=0,a=0,l=0,c=0,r=null,t=!0)),i++;for(t&&it(e),we(e),i=1;i<e.length;){if(e[i-1][0]===B&&e[i][0]===A){const g=e[i-1][1],u=e[i][1],f=St(g,u),m=St(u,g);f>=m?(f>=g.length/2||f>=u.length/2)&&(e.splice(i,0,S(C,u.substring(0,f))),e[i-1][1]=g.substring(0,g.length-f),e[i+1][1]=u.substring(f),i++):(m>=g.length/2||m>=u.length/2)&&(e.splice(i,0,S(C,g.substring(0,m))),e[i-1][0]=A,e[i-1][1]=u.substring(0,u.length-m),e[i+1][0]=B,e[i+1][1]=g.substring(m),i++),i++}i++}}const Et=/[^a-z0-9]/i,Ct=/\s/,kt=/[\r\n]/,_e=/\n\r?\n$/,ve=/^\r?\n\r?\n/;function we(e){function t(n,r){if(!n||!r)return 6;const i=n.charAt(n.length-1),o=r.charAt(0),a=i.match(Et),l=o.match(Et),c=a&&i.match(Ct),g=l&&o.match(Ct),u=c&&i.match(kt),f=g&&o.match(kt),m=u&&n.match(_e),h=f&&r.match(ve);return m||h?5:u||f?4:a&&!c&&g?3:c||g?2:a||l?1:0}let s=1;for(;s<e.length-1;){if(e[s-1][0]===C&&e[s+1][0]===C){let n=e[s-1][1],r=e[s][1],i=e[s+1][1];const o=J(n,r);if(o){const u=r.substring(r.length-o);n=n.substring(0,n.length-o),r=u+r.substring(0,r.length-o),i=u+i}let a=n,l=r,c=i,g=t(n,r)+t(r,i);for(;r.charAt(0)===i.charAt(0);){n+=r.charAt(0),r=r.substring(1)+i.charAt(0),i=i.substring(1);const u=t(n,r)+t(r,i);u>=g&&(g=u,a=n,l=r,c=i)}e[s-1][1]!==a&&(a?e[s-1][1]=a:(e.splice(s-1,1),s--),e[s][1]=l,c?e[s+1][1]=c:(e.splice(s+1,1),s--))}s++}}function it(e){e.push(S(C,""));let t=0,s=0,n=0,r="",i="",o;for(;t<e.length;)switch(e[t][0]){case A:n++,i+=e[t][1],t++;break;case B:s++,r+=e[t][1],t++;break;case C:s+n>1?(s!==0&&n!==0&&(o=rt(i,r),o!==0&&(t-s-n>0&&e[t-s-n-1][0]===C?e[t-s-n-1][1]+=i.substring(0,o):(e.splice(0,0,S(C,i.substring(0,o))),t++),i=i.substring(o),r=r.substring(o)),o=J(i,r),o!==0&&(e[t][1]=i.substring(i.length-o)+e[t][1],i=i.substring(0,i.length-o),r=r.substring(0,r.length-o))),t-=s+n,e.splice(t,s+n),r.length&&(e.splice(t,0,S(B,r)),t++),i.length&&(e.splice(t,0,S(A,i)),t++),t++):t!==0&&e[t-1][0]===C?(e[t-1][1]+=e[t][1],e.splice(t,1)):t++,n=0,s=0,r="",i="";break}e[e.length-1][1]===""&&e.pop();let a=!1;for(t=1;t<e.length-1;)e[t-1][0]===C&&e[t+1][0]===C&&(e[t][1].substring(e[t][1].length-e[t-1][1].length)===e[t-1][1]?(e[t][1]=e[t-1][1]+e[t][1].substring(0,e[t][1].length-e[t-1][1].length),e[t+1][1]=e[t-1][1]+e[t+1][1],e.splice(t-1,1),a=!0):e[t][1].substring(0,e[t+1][1].length)===e[t+1][1]&&(e[t-1][1]+=e[t+1][1],e[t][1]=e[t][1].substring(e[t+1][1].length)+e[t+1][1],e.splice(t+1,1),a=!0)),t++;a&&it(e)}function Se(e){return typeof e=="string"?`'${e}'`:new Ee().serialize(e)}const Ee=function(){var t;class e{constructor(){at(this,t,new Map)}compare(n,r){const i=typeof n,o=typeof r;return i==="string"&&o==="string"?n.localeCompare(r):i==="number"&&o==="number"?n-r:String.prototype.localeCompare.call(this.serialize(n,!0),this.serialize(r,!0))}serialize(n,r){if(n===null)return"null";switch(typeof n){case"string":return r?n:`'${n}'`;case"bigint":return`${n}n`;case"object":return this.$object(n);case"function":return this.$function(n)}return String(n)}serializeObject(n){const r=Object.prototype.toString.call(n);if(r!=="[object Object]")return this.serializeBuiltInType(r.length<10?`unknown:${r}`:r.slice(8,-1),n);const i=n.constructor,o=i===Object||i===void 0?"":i.name;if(o!==""&&globalThis[o]===i)return this.serializeBuiltInType(o,n);if(typeof n.toJSON=="function"){const a=n.toJSON();return o+(a!==null&&typeof a=="object"?this.$object(a):`(${this.serialize(a)})`)}return this.serializeObjectEntries(o,Object.entries(n))}serializeBuiltInType(n,r){const i=this["$"+n];if(i)return i.call(this,r);if(typeof(r==null?void 0:r.entries)=="function")return this.serializeObjectEntries(n,r.entries());throw new Error(`Cannot serialize ${n}`)}serializeObjectEntries(n,r){const i=Array.from(r).sort((a,l)=>this.compare(a[0],l[0]));let o=`${n}{`;for(let a=0;a<i.length;a++){const[l,c]=i[a];o+=`${this.serialize(l,!0)}:${this.serialize(c)}`,a<i.length-1&&(o+=",")}return o+"}"}$object(n){let r=F(this,t).get(n);return r===void 0&&(F(this,t).set(n,`#${F(this,t).size}`),r=this.serializeObject(n),F(this,t).set(n,r)),r}$function(n){const r=Function.prototype.toString.call(n);return r.slice(-15)==="[native code] }"?`${n.name||""}()[native]`:`${n.name}(${n.length})${r.replace(/\s*\n\s*/g,"")}`}$Array(n){let r="[";for(let i=0;i<n.length;i++)r+=this.serialize(n[i]),i<n.length-1&&(r+=",");return r+"]"}$Date(n){try{return`Date(${n.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(n){return`ArrayBuffer[${new Uint8Array(n).join(",")}]`}$Set(n){return`Set${this.$Array(Array.from(n).sort((r,i)=>this.compare(r,i)))}`}$Map(n){return this.serializeObjectEntries("Map",n.entries())}}t=new WeakMap;for(const s of["Error","RegExp","URL"])e.prototype["$"+s]=function(n){return`${s}(${n})`};for(const s of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])e.prototype["$"+s]=function(n){return`${s}[${n.join(",")}]`};for(const s of["BigInt64Array","BigUint64Array"])e.prototype["$"+s]=function(n){return`${s}[${n.join("n,")}${n.length>0?"n":""}]`};return e}(),Ce=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],ke=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",D=[];class Me{constructor(){L(this,"_data",new j);L(this,"_hash",new j([...Ce]));L(this,"_nDataBytes",0);L(this,"_minBufferSize",0)}finalize(t){t&&this._append(t);const s=this._nDataBytes*8,n=this._data.sigBytes*8;return this._data.words[n>>>5]|=128<<24-n%32,this._data.words[(n+64>>>9<<4)+14]=Math.floor(s/4294967296),this._data.words[(n+64>>>9<<4)+15]=s,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(t,s){const n=this._hash.words;let r=n[0],i=n[1],o=n[2],a=n[3],l=n[4],c=n[5],g=n[6],u=n[7];for(let f=0;f<64;f++){if(f<16)D[f]=t[s+f]|0;else{const _=D[f-15],v=(_<<25|_>>>7)^(_<<14|_>>>18)^_>>>3,w=D[f-2],E=(w<<15|w>>>17)^(w<<13|w>>>19)^w>>>10;D[f]=v+D[f-7]+E+D[f-16]}const m=l&c^~l&g,h=r&i^r&o^i&o,y=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),b=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),d=u+b+m+ke[f]+D[f],p=y+h;u=g,g=c,c=l,l=a+d|0,a=o,o=i,i=r,r=d+p|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+l|0,n[5]=n[5]+c|0,n[6]=n[6]+g|0,n[7]=n[7]+u|0}_append(t){typeof t=="string"&&(t=j.fromUtf8(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_process(t){let s,n=this._data.sigBytes/64;t?n=Math.ceil(n):n=Math.max((n|0)-this._minBufferSize,0);const r=n*16,i=Math.min(r*4,this._data.sigBytes);if(r){for(let o=0;o<r;o+=16)this._doProcessBlock(this._data.words,o);s=this._data.words.splice(0,r),this._data.sigBytes-=i}return new j(s,i)}}class j{constructor(t,s){L(this,"words");L(this,"sigBytes");t=this.words=t||[],this.sigBytes=s===void 0?t.length*4:s}static fromUtf8(t){const s=unescape(encodeURIComponent(t)),n=s.length,r=[];for(let i=0;i<n;i++)r[i>>>2]|=(s.charCodeAt(i)&255)<<24-i%4*8;return new j(r,n)}toBase64(){const t=[];for(let s=0;s<this.sigBytes;s+=3){const n=this.words[s>>>2]>>>24-s%4*8&255,r=this.words[s+1>>>2]>>>24-(s+1)%4*8&255,i=this.words[s+2>>>2]>>>24-(s+2)%4*8&255,o=n<<16|r<<8|i;for(let a=0;a<4&&s*8+a*6<this.sigBytes*8;a++)t.push(Ae.charAt(o>>>6*(3-a)&63))}return t.join("")}concat(t){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let s=0;s<t.sigBytes;s++){const n=t.words[s>>>2]>>>24-s%4*8&255;this.words[this.sigBytes+s>>>2]|=n<<24-(this.sigBytes+s)%4*8}else for(let s=0;s<t.sigBytes;s+=4)this.words[this.sigBytes+s>>>2]=t.words[s>>>2];this.sigBytes+=t.sigBytes}}function Te(e){return new Me().finalize(e).toBase64()}function Le(e){return Te(Se(e))}function Be(e,t={}){const s=Pt("",[]);let n=s,r=s;function i(o,a){n=r;const l=a?{...t,...a}:t,c=e(o,l.lineNumbers);return{from:n,to:r}=ze(n,c,l),{current:r,previous:n}}return{get current(){return r},get previous(){return n},commit:i,reset(){n=s,r=s}}}function De(e,t,s,n=!1){const r=e.codeToTokens(t,s);return{...Pt(t,r.tokens,JSON.stringify([s.lang,"themes"in s?s.themes:s.theme]),n),bg:r.bg,fg:r.fg,rootStyle:r.rootStyle,themeName:r.themeName,lang:s.lang}}function Pt(e,t,s="",n=!1){const r=Le(e+s);let i=0,o=0;const a=Math.ceil(Math.log10(t.length)),l=Oe(t).flatMap((c,g)=>{var m;o=((m=c[0])==null?void 0:m.offset)||i;const u=c[c.length-1];u?i=u.offset+u.content.length:i+=1;const f=[...c,{content:`
`,offset:i}];return n&&f.unshift({key:`${r}-ln-${g+1}`,content:`${String(g+1).padStart(a," ")}  `,offset:o,htmlClass:"shiki-magic-move-line-number"}),f}).map((c,g)=>{const u=c;return u.key||(u.key=`${r}-${g}`),u});return{code:e,hash:r,tokens:l,lineNumbers:n}}function Oe(e){return e.map(t=>t.flatMap(s=>{if(s.content.match(/^\s+$/))return s;const n=s.content.match(/^(\s*)(.*?)(\s*)$/);if(!n)return s;const[,r,i,o]=n;if(!r&&!o)return s;const a=[{...s,offset:s.offset+r.length,content:i}];return r&&a.unshift({content:r,offset:s.offset}),o&&a.push({content:o,offset:s.offset+r.length+i.length}),a}))}function Re(e,t){let s=0;const n=e.key;let r=0;const i=[];function o(){return r===0?(r++,n):`${n}-${r++}`}for(const a of t)a>s&&i.push({...e,content:e.content.slice(s,a),offset:e.offset+s,key:o()}),s=a;return s<e.content.length&&i.push({...e,content:e.content.slice(s),offset:e.offset+s,key:o()}),i}function At(e,t){const s=Array.from(t instanceof Set?t:new Set(t)).sort((n,r)=>n-r);return s.length?e.flatMap(n=>{const r=s.filter(i=>n.offset<i&&i<n.offset+n.content.length).map(i=>i-n.offset).sort((i,o)=>i-o);return r.length?Re(n,r):n}):e}function ze(e,t,s={}){const{splitTokens:n=!1,enhanceMatching:r=!0}=s,i=Pe(e.code,t.code,s),o=n?At(e.tokens,i.flatMap(c=>c.from)):e.tokens,a=n?At(t.tokens,i.flatMap(c=>c.to)):t.tokens,l=new Set;if(i.forEach(c=>{var h,y;const g=o.filter(b=>b.offset>=c.from[0]&&b.offset+b.content.length<=c.from[1]),u=a.filter(b=>b.offset>=c.to[0]&&b.offset+b.content.length<=c.to[1]);let f=0,m=0;for(;f<g.length&&m<u.length&&!(!g[f]||!u[m]);)g[f].content===u[m].content?(u[m].key=g[f].key,l.add(g[f].key),f++,m++):((h=g[f+1])==null?void 0:h.content)===u[m].content?f++:(g[f].content===((y=u[m+1])==null?void 0:y.content)||f++,m++)}),r)for(const c of o){if(l.has(c.key)||c.content.length<3||!c.content.match(/^[\w-]+$/))continue;const g=a.find(u=>u.content===c.content&&!l.has(u.key));g&&(g.key=c.key,l.add(c.key))}return{from:o.length===e.tokens.length?e:{...e,tokens:o},to:a.length===t.tokens.length?t:{...t,tokens:a}}}function Pe(e,t,s={}){var a;let n=O(e,t);n=((a=s.diffCleanup)==null?void 0:a.call(s,n))||n;let r="",i="";const o=[];for(const[l,c]of n)l===0?(o.push({from:[r.length,r.length+c.length],to:[i.length,i.length+c.length],content:c}),r+=c,i+=c):l===-1?r+=c:l===1&&(i+=c);if(r!==e||i!==t)throw new Error("Content mismatch");return o}const M="shiki-magic-move",tt=`${M}-leave-from`,je=`${M}-leave-to`,Mt=`${M}-leave-active`,et=`${M}-enter-from`,nt=`${M}-enter-to`,Tt=`${M}-enter-active`,Lt=`${M}-move`,Bt=`${M}-container-resize`,Dt=`${M}-container-restyle`,Ne={globalScale:1,duration:500,delayMove:.3,delayLeave:.1,delayEnter:.7,delayContainer:.4,stagger:0,easing:"ease",animateContainer:!0,containerStyle:!0};class $e{constructor(t,s={}){L(this,"mapDom",new Map);L(this,"previousPromises",[]);L(this,"isFirstRender",!0);this.options={...Ne,...s},typeof t=="string"?this.container=document.querySelector(t):this.container=t,this.anchor=document.createElement("span"),this.anchor.style.position="absolute",this.anchor.style.top="0",this.anchor.style.left="0",this.anchor.style.height="1px",this.anchor.style.width="1px",this.container.prepend(this.anchor)}applyElementContent(t,s){s.content!==`
`&&(t.textContent=s.content,t.classList.add(`${M}-item`))}applyElementStyle(t,s){if(s.htmlStyle)if(typeof s.htmlStyle=="string")t.setAttribute("style",s.htmlStyle);else for(const[n,r]of Object.entries(s.htmlStyle))t.style.setProperty(n,r);s.htmlClass&&(t.className=[`${M}-item`,s.htmlClass].join(" ")),s.color&&(t.style.color=s.color),s.bgColor&&(t.style.backgroundColor=s.bgColor)}applyElement(t,s){this.applyElementContent(t,s),this.applyElementStyle(t,s)}applyNodeStyle(t,s){if(s.bg&&(t.style.backgroundColor=s.bg),s.fg&&(t.style.color=s.fg),s.rootStyle){const n=s.rootStyle.split(";");for(const r of n){const[i,o]=r.split(":");i&&o&&t.style.setProperty(i.trim(),o.trim())}}}applyContainerStyle(t){this.options.containerStyle&&this.applyNodeStyle(this.container,t)}registerTransitionEnd(t,s){return()=>{let n=!1,r=()=>{};const i=Promise.race([Promise.allSettled(t.getAnimations().map(o=>o.finished)).then(()=>s()),new Promise(o=>{r=()=>{n||(n=!0,s(),o())}})]);return i.resolve=r,i}}setCssVariables(){this.container.style.setProperty("--smm-duration",`${this.options.duration}ms`),this.container.style.setProperty("--smm-delay-move",`${this.options.delayMove}`),this.container.style.setProperty("--smm-delay-leave",`${this.options.delayLeave}`),this.container.style.setProperty("--smm-delay-enter",`${this.options.delayEnter}`),this.container.style.setProperty("--smm-delay-container",`${this.options.delayContainer}`),this.container.style.setProperty("--smm-easing",this.options.easing),this.container.style.setProperty("--smm-stagger","0")}replace(t){const s=new Map,n=t.tokens.map(r=>{if(this.mapDom.has(r.key)){const i=this.mapDom.get(r.key);return this.applyElement(i,r),s.set(r.key,i),this.mapDom.delete(r.key),i}else{const i=document.createElement(r.content===`
`?"br":"span");return this.applyElement(i,r),s.set(r.key,i),i}});this.container.replaceChildren(this.anchor,...n),this.applyContainerStyle(t),this.mapDom=s}render(t){this.setCssVariables();const s=new Map,n=[],r=[],i=[],o=[];this.previousPromises.forEach(h=>h.resolve()),this.previousPromises=[];const a=[],{globalScale:l}=this.options,c=new Map;let g=this.anchor.getBoundingClientRect();const u=this.container.getBoundingClientRect();for(const h of this.mapDom.values()){const y=h.getBoundingClientRect();c.set(h,{x:y.x-g.x,y:y.y-g.y})}const f=t.tokens.map(h=>{if(this.mapDom.has(h.key)){const y=this.mapDom.get(h.key);return this.applyElementContent(y,h),a.push(()=>{this.applyElementStyle(y,h)}),n.push(y),s.set(h.key,y),this.mapDom.delete(h.key),y}else{const y=document.createElement(h.content===`
`?"br":"span");return this.applyElement(y,h),r.push(y),s.set(h.key,y),y}});for(const[h,y]of this.mapDom)y.tagName!=="BR"&&i.push(y);for(const h of i)h.style.position="absolute";if(this.container.replaceChildren(this.anchor,...f,...i),this.mapDom=s,i.forEach((h,y)=>{h.style.position="absolute";const b=c.get(h);h.style.top=`${b.y/l}px`,h.style.left=`${b.x/l}px`,this.options.stagger?h.style.setProperty("--smm-stagger",`${y*this.options.stagger}ms`):h.style.removeProperty("--smm-stagger"),h.classList.add(tt),h.classList.add(Mt),a.unshift(()=>{h.classList.remove(tt),h.classList.add(je)}),o.push(this.registerTransitionEnd(h,()=>{h.classList.remove(tt),h.classList.remove(Mt),h.classList.remove(nt),h.remove()}))}),this.isFirstRender||r.forEach((h,y)=>{h.classList.add(et),h.classList.add(Tt),this.options.stagger?h.style.setProperty("--smm-stagger",`${y*this.options.stagger}ms`):h.style.removeProperty("--smm-stagger"),a.push(()=>{h.classList.remove(et),h.classList.add(nt)}),o.push(this.registerTransitionEnd(h,()=>{h.classList.remove(et),h.classList.remove(Tt),h.classList.remove(nt)}))}),g=this.anchor.getBoundingClientRect(),n.forEach((h,y)=>{const b=h.getBoundingClientRect(),d={x:b.x-g.x,y:b.y-g.y},p=c.get(h);h.style.transitionDuration=h.style.transitionDelay="0ms";const _=(p.x-d.x)/l,v=(p.y-d.y)/l;h.style.transform=`translate(${_}px, ${v}px)`,this.options.stagger?h.style.setProperty("--smm-stagger",`${y*this.options.stagger}ms`):h.style.removeProperty("--smm-stagger"),a.unshift(()=>{h.classList.add(Lt),h.style.transform=h.style.transitionDuration=h.style.transitionDelay=""}),o.push(this.registerTransitionEnd(h,()=>{h.classList.remove(Lt)}))}),this.options.animateContainer&&!this.isFirstRender){const h=this.container.getBoundingClientRect();(h.width!==u.width||h.height!==u.height)&&(this.container.style.transitionDuration=this.container.style.transitionDelay="0ms",this.container.style.height=`${u.height/l}px`,this.container.style.width=`${u.width/l}px`,a.unshift(()=>{this.container.classList.add(Bt),this.container.style.transitionDuration=this.container.style.transitionDelay="",this.container.style.height=`${h.height/l}px`,this.container.style.width=`${h.width/l}px`}),o.push(this.registerTransitionEnd(this.container,()=>{this.container.classList.remove(Bt),this.container.style.height=this.container.style.width=""})))}this.options.containerStyle&&(this.isFirstRender?this.applyContainerStyle(t):(a.push(()=>{this.container.classList.add(Dt),this.applyContainerStyle(t)}),o.push(this.registerTransitionEnd(this.container,()=>{this.container.classList.remove(Dt)})))),Ie(),a.forEach(h=>h());const m=o.map(h=>h());return this.isFirstRender=!1,this.previousPromises=m,Promise.all(m).then()}}function Ie(){return document.body.offsetHeight}var Fe=I(`
        <br>
      `,1),Ue=I(`
      <!>
      <span class="shiki-magic-move-item"> </span>
    `,1),xe=I(`
    <!>
  `,1),He=I(`<pre>  
  <!>
</pre>`);function qe(e,t){Y(t,!0);const s=re(t,"animate",3,!0),n=zt(t,["$$slots","$$events","$$legacy","animate","tokens","previous","options","onStart","onEnd"]);let r,i,o=K(!1);pt(()=>{r&&(r.innerHTML="",x(o,!0),i=new $e(r))}),pt(()=>{async function u(){var f,m;i&&(Object.assign(i.options,t.options),s()?(t.previous&&i.replace(t.previous),(f=t.onStart)==null||f.call(t),await i.render(t.tokens),(m=t.onEnd)==null||m.call(t)):i.replace(t.tokens))}u()});var a=He();let l;var c=P(N(a));{var g=u=>{var f=xe(),m=P(dt(f));ae(m,17,()=>t.tokens.tokens,h=>h.key,(h,y)=>{U();var b=Ue(),d=P(dt(b));{var p=E=>{var T=Fe();U(2),z(E,T)};_t(d,E=>{k(y).content===`
`&&E(p)})}var _=P(d,2);let v;var w=N(_);$(_),U(),st(()=>{v=ee(_,k(y).htmlStyle,v,{color:k(y).color}),oe(w,`
        ${k(y).content??""}
      `)}),z(h,b)}),U(),z(u,f)};_t(c,u=>{k(o)||u(g)})}U(),$(a),le(a,u=>r=u,()=>r),st(()=>l=te(a,l,{class:`shiki-magic-move-container ${(t==null?void 0:t.class)??""}`,...n})),z(e,a),G()}function Ve(e,t){Y(t,!0);const s=zt(t,["$$slots","$$events","$$legacy","highlighter","lang","theme","code","options","onStart","onEnd"]),n=Be(i=>{var o;return De(t.highlighter,i,{lang:t.lang,theme:t.theme},(o=t.options)==null?void 0:o.lineNumbers)},t.options),r=Ot(()=>n.commit(t.code));qe(e,ie({get tokens(){return k(r).current},get previous(){return k(r).previous},get options(){return t.options},get onStart(){return t.onStart},get onEnd(){return t.onEnd}},()=>s)),G()}var Ke=I('<div class="mb-2 block w-full max-w-full overflow-x-auto rounded-xl bg-neutral-100 px-4 py-3 text-base ring-1 ring-gray-200 ring-offset-2 ring-offset-neutral-100 ring-inset dark:bg-neutral-800 dark:ring-gray-800 dark:ring-offset-neutral-800"><!></div>');function Ye(e,t){Y(t,!0);const s=se({themes:["github-dark-default","github-light-default"],langs:["typst"]});let n=K(!1);Rt(async()=>{const o=window.matchMedia("(prefers-color-scheme: dark)");x(n,o.matches,!0),o.addEventListener("change",a=>{x(n,a.matches,!0)})});var r=Ke(),i=N(r);ce(i,()=>s,null,(o,a)=>{const l=Ot(()=>k(n)?"github-dark-default":"github-light-default");Ve(o,{lang:"typst",get theme(){return k(l)},get highlighter(){return k(a)},get code(){return t.code},options:{duration:200,stagger:.3}})}),$(r),z(e,r),G()}var Ge=I('<div class="flex w-screen flex-col px-5 py-14 md:min-h-screen md:py-20"><span class="text-new font-mono">Brand New Package</span> <span class="mt-2 max-w-7xl text-4xl font-medium tracking-tight text-balance font-stretch-expanded md:text-8xl">Your Typst circuit drawing companion</span> <div class="mt-8 flex items-center gap-3"><a href="/zap/docs" class="flex items-center gap-2 rounded-full bg-neutral-900 px-5 py-2 text-white transition hover:bg-neutral-900/90 dark:bg-white dark:text-black"><span class="icon-[hugeicons--book-open-02] size-5.5"></span> Documentation</a> <a href="/zap/examples" class="rounded-full bg-gray-500 px-5 py-2 text-white transition hover:bg-gray-500/90 dark:bg-gray-600 dark:hover:bg-gray-600/90">Examples</a></div> <div class="mt-20 grid max-w-7xl items-start gap-8 text-left md:grid-cols-2"><!> <div class="dark:border-neutral-border rounded-lg border border-neutral-200"><img alt="circuit"></div></div></div>');function ln(e,t){Y(t,!0);let s=[{code:`#import "@preview/zap:${vt}"

#zap.canvas({
    import zap: *
    
    isource("i1", (0,0), (5,0))
})`},{code:`#import "@preview/zap:${vt}"

#zap.canvas({
    import zap: *
    
    isource("i1", (0,0), (5,0))
    vsource("v1", (0,0))
})`}],n=K(bt(s[0].code)),r=bt(s[0].image),i=K(0);Rt(()=>{let u=setInterval(()=>{console.log(k(i)),k(i)===s.length-1?x(i,0):Qt(i),x(n,s[k(i)].code,!0)},2e3);return()=>clearInterval(u)});var o=Ge();Wt(u=>{Xt.title="Zap â€“ Your Typst Circuit Drawing Companion"});var a=P(N(o),6),l=N(a);Ye(l,{get code(){return k(n)}});var c=P(l,2),g=N(c);$(c),$(a),$(o),st(()=>ne(g,"src",r)),z(e,o),G()}export{ln as component};
